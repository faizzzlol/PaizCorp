<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paiz Shop</title>
    <link rel="stylesheet" href="styles.css">
    <script defer src="script.js"></script>
</head>
<body>
    <header class="header">
        <h1>Paiz Shop</h1>
    </header>
    
    <main>
        <section class="shop">
            <h2>Available Items</h2>
            <div class="items">
                <div class="item">
                    <h3>Enchantment Book</h3>
                    <p>Price: 5 Diamonds</p>
                    <button class="add-to-cart" data-name="Enchantment Book" data-price="5">Add to Cart</button>
                </div>
                <div class="item">
                    <h3>Shulker Box</h3>
                    <p>Price: 10 Diamonds</p>
                    <button class="add-to-cart" data-name="Shulker Box" data-price="10">Add to Cart</button>
                </div>
                <!-- Add more items here -->
            </div>
        </section>

        <section class="cart">
            <h2>Your Cart</h2>
            <div class="cart-items">
                <!-- Cart items will appear here -->
            </div>
            <div class="cart-summary">
                <p>Total: <span id="cart-total">0</span> Diamonds</p>
            </div>
            <button id="checkout-button">Checkout</button>
        </section>
    </main>

    <div id="checkout-modal" class="modal">
        <div class="modal-content">
            <h2>Checkout</h2>
            <label>
                Delivery Coordinates:
                <input type="text" id="delivery-coordinates">
            </label>
            <label>
                <input type="checkbox" id="pickup-method"> Pickup Method (No Charge)
            </label>
            <p id="delivery-charge"></p>
            <button id="confirm-order">Confirm Order</button>
            <button id="cancel-order">Cancel</button>
        </div>
    </div>

    <footer>
        <p>Paiz Shop &copy; 2024. All rights reserved.</p>
    </footer>

    <script>
        // JavaScript functionality
        const items = document.querySelectorAll('.add-to-cart');
        const cartItemsContainer = document.querySelector('.cart-items');
        const cartTotal = document.getElementById('cart-total');
        const checkoutButton = document.getElementById('checkout-button');
        const checkoutModal = document.getElementById('checkout-modal');
        const deliveryCoordinates = document.getElementById('delivery-coordinates');
        const pickupMethod = document.getElementById('pickup-method');
        const deliveryCharge = document.getElementById('delivery-charge');
        const confirmOrder = document.getElementById('confirm-order');
        const cancelOrder = document.getElementById('cancel-order');

        let cart = [];

        function updateCart() {
            cartItemsContainer.innerHTML = '';
            let total = 0;
            cart.forEach((item, index) => {
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <p>${item.name} - ${item.quantity} x ${item.price} Diamonds</p>
                    <button class="remove-item" data-index="${index}">Remove</button>
                `;
                cartItemsContainer.appendChild(cartItem);
                total += item.quantity * item.price;
            });
            cartTotal.textContent = total;
        }

        items.forEach(item => {
            item.addEventListener('click', () => {
                const name = item.getAttribute('data-name');
                const price = parseInt(item.getAttribute('data-price'), 10);
                const existingItem = cart.find(cartItem => cartItem.name === name);
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    cart.push({ name, price, quantity: 1 });
                }
                updateCart();
            });
        });

        cartItemsContainer.addEventListener('click', (e) => {
            if (e.target.classList.contains('remove-item')) {
                const index = e.target.getAttribute('data-index');
                cart.splice(index, 1);
                updateCart();
            }
        });

        checkoutButton.addEventListener('click', () => {
            checkoutModal.style.display = 'block';
        });

        pickupMethod.addEventListener('change', () => {
            if (pickupMethod.checked) {
                deliveryCharge.textContent = 'No delivery charge for pickup.';
            } else {
                deliveryCharge.textContent = '';
            }
        });

        confirmOrder.addEventListener('click', () => {
            const coordinates = deliveryCoordinates.value;
            if (!pickupMethod.checked && !coordinates) {
                alert('Please provide delivery coordinates or select pickup method.');
                return;
            }

            const orderDetails = {
                cart,
                coordinates: pickupMethod.checked ? 'Pickup' : coordinates,
                total: cartTotal.textContent
            };

            console.log('Order Confirmed:', orderDetails);

            // Simulate sending to Discord
            alert('Order sent to Discord!');

            cart = [];
            updateCart();
            checkoutModal.style.display = 'none';
        });

        cancelOrder.addEventListener('click', () => {
            alert('Order canceled and sent to Discord!');
            checkoutModal.style.display = 'none';
        });

        window.addEventListener('click', (e) => {
            if (e.target === checkoutModal) {
                checkoutModal.style.display = 'none';
            }
        });
    </script>
</body>
</html>
