<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="/PaizCorp/PaizShop/PaizShop2.png" sizes="16x16">
    <title>Paiz Shop</title>
    <meta name="description" content="Paiz Shop. Best item supplier in Skyxion.">
    <meta name="keywords" content="The Legend Of Legiona, TheLoL, TheLoL Website, The LoL, TheLol Server, The LoL Server, The Legend of Legiona Website, faizzzlol, FaizGG, Faiz Gaming, The Sus, TLoL, TL, CornHub, 4k, Apple, iPhone 16, iPhone 15, Apple Watch, iPhone SE, YouTube, Netflix, Roblox, Twitch, Maybank, Instagram, Paiz Shop, Skyxion, Neverland, Paiz Corp, Paiz Chicken, Paiz Railways">
    <meta property="og:title" content="Paiz Shop"/>
    <meta property="og:url" content="https://faizzzlol.github.io/PaizCorp/PaizShop/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:description" content="Paiz Shop. Best item supplier in Skyxion."/>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>
            <img src="PaizShop2.png" alt="Paiz Shop Logo" id="shop-logo">
            <a href="" id="shop-link">Paiz Shop</a>
        </h1>
        <nav>
            <ul>
                <li><a href="/PaizCorp/PaizShop/order-history">Order History</a></li>
                <li><a href="/PaizCorp/PaizShop/how-to-use">How to Use</a></li>
                <li><a href="/thelol/finance/currency-converter">Currency</a></li>
                <li><a href="https://discord.gg/TB4T8qwN4R">Contact Us</a></li>
                <li><a href="/PaizCorp/PaizShop/feedback">Feedback</a></li>
                <li><a href="https://sociabuzz.com/faizgg/donate">Donate</a></li>
            </ul>
        </nav>
        <div class="theme-switcher">
            <label class="switch">
                <input type="checkbox" id="theme-toggle" onclick="toggleTheme()">
                <span class="slider round"></span>
            </label>
        </div>
    </header>
    <main>
        <!-- Search bar and category filter -->
        <center>
            <div id="search-container">
                <input type="text" id="item-search" placeholder="Search for an item..." oninput="searchAndFilterItems()">
                <button onclick="searchAndFilterItems()">Search</button>
            </div>
            <div id="category-container">
                <label for="category-filter">Category:</label>
                <select id="category-filter" onchange="searchAndFilterItems()">
                    <option value="all">All</option>
                    <option value="blocks">Blocks</option>
                    <option value="books">Books</option>
                    <option value="resources">Resources</option>
                </select>
            </div>
        </center>

        <section id="shop-items">
            <!-- Items list -->
            <div class="item" data-category="blocks">
                <img src="shulker_box.png" alt="Shulker Box">
                <div>
                    <h3>Shulker Box</h3>
                    <p>4 Diamond</p>
                    <p>Available Stock: <span id="stock-shulker">100</span></p>
                    <div class="sold-out" id="sold-out-shulker" style="display:none;">Sold Out</div>
                    <label for="quantity-shulker">Quantity:</label>
                    <input type="number" id="quantity-shulker" min="1" value="1" oninput="validateStock('shulker')">
                </div>
                <button id="buy-shulker" onclick="buyItem('shulker', 4)">Buy Now</button>
            </div>

            <div class="item" data-category="books">
                <img src="mending.png" alt="Mending">
                <div>
                    <h3>Mending I</h3>
                    <p>3 Diamond</p>
                    <p>Available Stock: <span id="stock-mending">0</span></p>
                    <div class="sold-out" id="sold-out-mending">Sold Out</div>
                    <label for="quantity-mending">Quantity:</label>
                    <input type="number" id="quantity-mending" min="1" value="1" oninput="validateStock('mending')">
                </div>
                <button id="buy-mending" onclick="buyItem('mending', 3)" disabled>Buy Now</button>
            </div>

            <div class="item" data-category="books">
                <img src="unbreaking.png" alt="Unbreaking III">
                <div>
                    <h3>Unbreaking III</h3>
                    <p>2 Diamond</p>
                    <p>Available Stock: <span id="stock-unbreaking">0</span></p>
                    <div class="sold-out" id="sold-out-unbreaking" style="display:none;">Sold Out</div>
                    <label for="quantity-unbreaking">Quantity:</label>
                    <input type="number" id="quantity-unbreaking" min="1" value="1" oninput="validateStock('unbreaking')">
                </div>
                <button id="buy-unbreaking" onclick="buyItem('unbreaking', 2)" disabled>Buy Now</button>
            </div>

            <div class="item" data-category="resources">
                <img src="nether_wart.png" alt="Nether Wart">
                <div>
                    <h3>Nether Wart</h3>
                    <p>3 Diamond</p>
                    <p>Available Stock: <span id="stock-wart">10</span></p>
                    <div class="sold-out" id="sold-out-wart" style="display:none;">Sold Out</div>
                    <label for="quantity-wart">Quantity:</label>
                    <input type="number" id="quantity-wart" min="1" value="1" oninput="validateStock('wart')">
                </div>
                <button id="buy-wart" onclick="buyItem('wart', 3)">Buy Now</button>
            </div>

            <div class="item" data-category="resources">
                <img src="iron_ingot.png" alt="Iron Ingot">
                <div>
                    <h3>Iron Ingot</h3>
                    <p>1 Diamond</p>
                    <p>Available Stock: <span id="stock-iron_ingot">500</span></p>
                    <div class="sold-out" id="sold-out-iron_ingot" style="display:none;">Sold Out</div>
                    <label for="quantity-iron_ingot">Quantity:</label>
                    <input type="number" id="quantity-iron_ingot" min="1" value="1" oninput="validateStock('iron_ingot')">
                </div>
                <button id="buy-iron-ingot" onclick="buyItem('iron_ingot', 1)">Buy Now</button>
            </div>
        </section>
    </main>
    <footer>
        <p>&copy; 2024 Paiz Shop. All rights reserved.</p>
        <button onclick="clearUserData()" class="clear-data-btn">Clear My Data</button>
    </footer>

    <!-- JavaScript for Stock Validation, Theme Toggle, Search, and Category Filter -->
    <script>
        // Handle "Buy Now" button
        function buyItem(item, price) {
            const stock = parseInt(document.getElementById(`stock-${item}`).innerText);
            const quantity = parseInt(document.getElementById(`quantity-${item}`).value);

            // Check stock availability
            if (quantity > stock || stock === 0) {
                alert("Not enough stock available!");
                return;
            }

            // Store the item details in sessionStorage for checkout
            sessionStorage.setItem('selectedItem', JSON.stringify({
                item: item,
                quantity: quantity,
                price: price
            }));

            // Redirect to the checkout page
            window.location.href = '/PaizCorp/PaizShop/checkout'; // Ensure this path matches your actual checkout page
        }

        // Validate stock on quantity change
        function validateStock(item) {
            const stock = parseInt(document.getElementById(`stock-${item}`).innerText);
            const quantity = parseInt(document.getElementById(`quantity-${item}`).value);
            const buyButton = document.getElementById(`buy-${item}`);
            const soldOut = document.getElementById(`sold-out-${item}`);

            if (quantity > stock || stock === 0) {
                buyButton.disabled = true;
                soldOut.style.display = 'block';
            } else {
                buyButton.disabled = false;
                soldOut.style.display = 'none';
            }
        }

        // Theme toggle
        function toggleTheme() {
            const body = document.body;
            body.classList.toggle('dark-theme');
            const theme = body.classList.contains('dark-theme') ? 'dark' : 'light';
            localStorage.setItem('theme', theme);
        }

        // Apply saved theme on page load
        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                document.body.setAttribute('data-theme', savedTheme);
                document.getElementById('theme-toggle').checked = savedTheme === 'dark';
            }
        });

        // Search and filter items
        function searchAndFilterItems() {
            const searchQuery = document.getElementById('item-search').value.toLowerCase();
            const selectedCategory = document.getElementById('category-filter').value;
            const items = document.querySelectorAll('.item');

            items.forEach(item => {
                const itemName = item.querySelector('h3').innerText.toLowerCase();
                const itemCategory = item.getAttribute('data-category');

                // Filter based on both search query and category
                const matchesSearch = itemName.includes(searchQuery);
                const matchesCategory = selectedCategory === 'all' || itemCategory === selectedCategory;

                if (matchesSearch && matchesCategory) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        }

            // Initialize stock validation
            validateStock('shulker');
            validateStock('mending');
            validateStock('unbreaking');
            validateStock('wart');
            validateStock('iron_ingot');
        });

        // Clear user data (for debugging or privacy purposes)
        function clearUserData() {
            // Clear theme preference
            localStorage.removeItem('theme');
            document.body.setAttribute('data-theme', 'light');

            // Clear order history
            localStorage.removeItem('orderHistory');
    
            // Clear any other user-specific data stored in localStorage
            sessionStorage.clear();
    
            // Provide feedback to the user
            alert("All user data has been cleared.");
        }
    </script>
</body>
</html>
